<mt-toolbar [comp]='toolbar' [sm]='sm'></mt-toolbar>
<div *ngIf='comp.cardView' class="row" cdkDropList (cdkDropListDropped)="drop($event)">
    <mat-card *ngFor="let row of data"
        [class]='sm.getColsClass(comp, "datacols") + " card"' cdkDrag [cdkDragDisabled]="!comp.dragdrop">
        <div class="menu" (click)='toggleExpand(row)'>
            <div>
                <mt-item [comp]='summary(row)' [sm]='sm'></mt-item>
            </div>
            <span class="menu-spacer"></span>
            <button mat-icon-button
                (click)='toggleExpand(row); $event.stopPropagation()'>
                <mat-icon *ngIf='currow === row'>expand_less</mat-icon>
                <mat-icon *ngIf='currow !== row'>expand_more</mat-icon>
            </button>
        </div>

        <mt-container [comp]='comp' [sm]='sm' *ngIf='currow === row'></mt-container>
    </mat-card>
</div>
<div *ngIf='!comp.cardView && hasData()' cdkDropList (cdkDropListDropped)="drop($event)" class="table-outer">
    <table class="mat-table mat-elevation-z8 table">
        <tbody>
            <tr class="mat-row table-row table-header-row">
                <td class="mat-cell" *ngFor='let cap of captions' [style]='getCellStyle(0)'>{{cap}}</td>
            </tr>
            <tr *ngFor="let row of data; let ind = index" class="mat-row table-row" cdkDrag [cdkDragDisabled]="!comp.dragdrop">
                <td class="mat-cell" *ngFor='let feld of fields' [style]='getCellStyle(ind)'>{{getCellValue(feld,ind)}}</td>
            </tr>
        </tbody>
    </table>
</div>